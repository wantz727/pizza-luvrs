"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DynamoDBDocument = void 0;
const DynamoDBDocumentClient_1 = require("./DynamoDBDocumentClient");
const BatchExecuteStatementCommand_1 = require("./commands/BatchExecuteStatementCommand");
const BatchGetCommand_1 = require("./commands/BatchGetCommand");
const BatchWriteCommand_1 = require("./commands/BatchWriteCommand");
const DeleteCommand_1 = require("./commands/DeleteCommand");
const ExecuteStatementCommand_1 = require("./commands/ExecuteStatementCommand");
const ExecuteTransactionCommand_1 = require("./commands/ExecuteTransactionCommand");
const GetCommand_1 = require("./commands/GetCommand");
const PutCommand_1 = require("./commands/PutCommand");
const QueryCommand_1 = require("./commands/QueryCommand");
const ScanCommand_1 = require("./commands/ScanCommand");
const TransactGetCommand_1 = require("./commands/TransactGetCommand");
const TransactWriteCommand_1 = require("./commands/TransactWriteCommand");
const UpdateCommand_1 = require("./commands/UpdateCommand");
/**
 * The document client simplifies working with items in Amazon DynamoDB by
 * abstracting away the notion of attribute values. This abstraction annotates native
 * JavaScript types supplied as input parameters, as well as converts annotated
 * response data to native JavaScript types.
 *
 * ## Marshalling Input and Unmarshalling Response Data
 *
 * The document client affords developers the use of native JavaScript types
 * instead of `AttributeValue`s to simplify the JavaScript development
 * experience with Amazon DynamoDB. JavaScript objects passed in as parameters
 * are marshalled into `AttributeValue` shapes required by Amazon DynamoDB.
 * Responses from DynamoDB are unmarshalled into plain JavaScript objects
 * by the `DocumentClient`. The `DocumentClient` does not accept
 * `AttributeValue`s in favor of native JavaScript types.
 *
 * |          JavaScript Type          | DynamoDB AttributeValue |
 * | :-------------------------------: | ----------------------- |
 * |              String               | S                       |
 * |          Number / BigInt          | N                       |
 * |              Boolean              | BOOL                    |
 * |               null                | NULL                    |
 * |               Array               | L                       |
 * |              Object               | M                       |
 * |   Set\<Uint8Array, Blob, ...\>    | BS                      |
 * |       Set\<Number, BigInt\>       | NS                      |
 * |           Set\<String\>           | SS                      |
 * | Uint8Array, Buffer, File, Blob... | B                       |
 *
 * ### Example
 *
 * Here is an example list which is sent to DynamoDB client in an operation:
 *
 * ```json
 * { "L": [{ "NULL": true }, { "BOOL": false }, { "N": 1 }, { "S": "two" }] }
 * ```
 *
 * The DynamoDB document client abstracts the attribute values as follows in
 * both input and output:
 *
 * ```json
 * [null, false, 1, "two"]
 * ```
 *
 * @see {@link https://www.npmjs.com/package/@aws-sdk/client-dynamodb @aws-sdk/client-dynamodb}
 */
class DynamoDBDocument extends DynamoDBDocumentClient_1.DynamoDBDocumentClient {
    static from(client, translateConfig) {
        return new DynamoDBDocument(client, translateConfig);
    }
    batchExecuteStatement(args, optionsOrCb, cb) {
        const command = new BatchExecuteStatementCommand_1.BatchExecuteStatementCommand(args);
        if (typeof optionsOrCb === "function") {
            this.send(command, optionsOrCb);
        }
        else if (typeof cb === "function") {
            if (typeof optionsOrCb !== "object")
                throw new Error(`Expect http options but get ${typeof optionsOrCb}`);
            this.send(command, optionsOrCb || {}, cb);
        }
        else {
            return this.send(command, optionsOrCb);
        }
    }
    batchGet(args, optionsOrCb, cb) {
        const command = new BatchGetCommand_1.BatchGetCommand(args);
        if (typeof optionsOrCb === "function") {
            this.send(command, optionsOrCb);
        }
        else if (typeof cb === "function") {
            if (typeof optionsOrCb !== "object")
                throw new Error(`Expect http options but get ${typeof optionsOrCb}`);
            this.send(command, optionsOrCb || {}, cb);
        }
        else {
            return this.send(command, optionsOrCb);
        }
    }
    batchWrite(args, optionsOrCb, cb) {
        const command = new BatchWriteCommand_1.BatchWriteCommand(args);
        if (typeof optionsOrCb === "function") {
            this.send(command, optionsOrCb);
        }
        else if (typeof cb === "function") {
            if (typeof optionsOrCb !== "object")
                throw new Error(`Expect http options but get ${typeof optionsOrCb}`);
            this.send(command, optionsOrCb || {}, cb);
        }
        else {
            return this.send(command, optionsOrCb);
        }
    }
    delete(args, optionsOrCb, cb) {
        const command = new DeleteCommand_1.DeleteCommand(args);
        if (typeof optionsOrCb === "function") {
            this.send(command, optionsOrCb);
        }
        else if (typeof cb === "function") {
            if (typeof optionsOrCb !== "object")
                throw new Error(`Expect http options but get ${typeof optionsOrCb}`);
            this.send(command, optionsOrCb || {}, cb);
        }
        else {
            return this.send(command, optionsOrCb);
        }
    }
    executeStatement(args, optionsOrCb, cb) {
        const command = new ExecuteStatementCommand_1.ExecuteStatementCommand(args);
        if (typeof optionsOrCb === "function") {
            this.send(command, optionsOrCb);
        }
        else if (typeof cb === "function") {
            if (typeof optionsOrCb !== "object")
                throw new Error(`Expect http options but get ${typeof optionsOrCb}`);
            this.send(command, optionsOrCb || {}, cb);
        }
        else {
            return this.send(command, optionsOrCb);
        }
    }
    executeTransaction(args, optionsOrCb, cb) {
        const command = new ExecuteTransactionCommand_1.ExecuteTransactionCommand(args);
        if (typeof optionsOrCb === "function") {
            this.send(command, optionsOrCb);
        }
        else if (typeof cb === "function") {
            if (typeof optionsOrCb !== "object")
                throw new Error(`Expect http options but get ${typeof optionsOrCb}`);
            this.send(command, optionsOrCb || {}, cb);
        }
        else {
            return this.send(command, optionsOrCb);
        }
    }
    get(args, optionsOrCb, cb) {
        const command = new GetCommand_1.GetCommand(args);
        if (typeof optionsOrCb === "function") {
            this.send(command, optionsOrCb);
        }
        else if (typeof cb === "function") {
            if (typeof optionsOrCb !== "object")
                throw new Error(`Expect http options but get ${typeof optionsOrCb}`);
            this.send(command, optionsOrCb || {}, cb);
        }
        else {
            return this.send(command, optionsOrCb);
        }
    }
    put(args, optionsOrCb, cb) {
        const command = new PutCommand_1.PutCommand(args);
        if (typeof optionsOrCb === "function") {
            this.send(command, optionsOrCb);
        }
        else if (typeof cb === "function") {
            if (typeof optionsOrCb !== "object")
                throw new Error(`Expect http options but get ${typeof optionsOrCb}`);
            this.send(command, optionsOrCb || {}, cb);
        }
        else {
            return this.send(command, optionsOrCb);
        }
    }
    query(args, optionsOrCb, cb) {
        const command = new QueryCommand_1.QueryCommand(args);
        if (typeof optionsOrCb === "function") {
            this.send(command, optionsOrCb);
        }
        else if (typeof cb === "function") {
            if (typeof optionsOrCb !== "object")
                throw new Error(`Expect http options but get ${typeof optionsOrCb}`);
            this.send(command, optionsOrCb || {}, cb);
        }
        else {
            return this.send(command, optionsOrCb);
        }
    }
    scan(args, optionsOrCb, cb) {
        const command = new ScanCommand_1.ScanCommand(args);
        if (typeof optionsOrCb === "function") {
            this.send(command, optionsOrCb);
        }
        else if (typeof cb === "function") {
            if (typeof optionsOrCb !== "object")
                throw new Error(`Expect http options but get ${typeof optionsOrCb}`);
            this.send(command, optionsOrCb || {}, cb);
        }
        else {
            return this.send(command, optionsOrCb);
        }
    }
    transactGet(args, optionsOrCb, cb) {
        const command = new TransactGetCommand_1.TransactGetCommand(args);
        if (typeof optionsOrCb === "function") {
            this.send(command, optionsOrCb);
        }
        else if (typeof cb === "function") {
            if (typeof optionsOrCb !== "object")
                throw new Error(`Expect http options but get ${typeof optionsOrCb}`);
            this.send(command, optionsOrCb || {}, cb);
        }
        else {
            return this.send(command, optionsOrCb);
        }
    }
    transactWrite(args, optionsOrCb, cb) {
        const command = new TransactWriteCommand_1.TransactWriteCommand(args);
        if (typeof optionsOrCb === "function") {
            this.send(command, optionsOrCb);
        }
        else if (typeof cb === "function") {
            if (typeof optionsOrCb !== "object")
                throw new Error(`Expect http options but get ${typeof optionsOrCb}`);
            this.send(command, optionsOrCb || {}, cb);
        }
        else {
            return this.send(command, optionsOrCb);
        }
    }
    update(args, optionsOrCb, cb) {
        const command = new UpdateCommand_1.UpdateCommand(args);
        if (typeof optionsOrCb === "function") {
            this.send(command, optionsOrCb);
        }
        else if (typeof cb === "function") {
            if (typeof optionsOrCb !== "object")
                throw new Error(`Expect http options but get ${typeof optionsOrCb}`);
            this.send(command, optionsOrCb || {}, cb);
        }
        else {
            return this.send(command, optionsOrCb);
        }
    }
}
exports.DynamoDBDocument = DynamoDBDocument;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRHluYW1vREJEb2N1bWVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9EeW5hbW9EQkRvY3VtZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUFBLHFFQUFtRjtBQUNuRiwwRkFJaUQ7QUFDakQsZ0VBQTBHO0FBQzFHLG9FQUFrSDtBQUNsSCw0REFBa0c7QUFDbEcsZ0ZBSTRDO0FBQzVDLG9GQUk4QztBQUM5QyxzREFBc0Y7QUFDdEYsc0RBQXNGO0FBQ3RGLDBEQUE4RjtBQUM5Rix3REFBMEY7QUFDMUYsc0VBQXNIO0FBQ3RILDBFQUl5QztBQUN6Qyw0REFBa0c7QUFJbEc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQTZDRztBQUNILE1BQWEsZ0JBQWlCLFNBQVEsK0NBQXNCO0lBQzFELE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBc0IsRUFBRSxlQUFpQztRQUNuRSxPQUFPLElBQUksZ0JBQWdCLENBQUMsTUFBTSxFQUFFLGVBQWUsQ0FBQyxDQUFDO0lBQ3ZELENBQUM7SUFzQk0scUJBQXFCLENBQzFCLElBQXVDLEVBQ3ZDLFdBQW9HLEVBQ3BHLEVBQWtFO1FBRWxFLE1BQU0sT0FBTyxHQUFHLElBQUksMkRBQTRCLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdkQsSUFBSSxPQUFPLFdBQVcsS0FBSyxVQUFVLEVBQUU7WUFDckMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsV0FBVyxDQUFDLENBQUM7U0FDakM7YUFBTSxJQUFJLE9BQU8sRUFBRSxLQUFLLFVBQVUsRUFBRTtZQUNuQyxJQUFJLE9BQU8sV0FBVyxLQUFLLFFBQVE7Z0JBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQywrQkFBK0IsT0FBTyxXQUFXLEVBQUUsQ0FBQyxDQUFDO1lBQzFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLFdBQVcsSUFBSSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7U0FDM0M7YUFB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QUFFLFdBQVcsQ0FBQyxDQUFDO1NBQ2pDO2FBQU0sSUFBSSxPQUFPLEVBQUUsS0FBSyxVQUFVLEVBQUU7WUFDbkMsSUFBSSxPQUFPLFdBQVcsS0FBSyxRQUFRO2dCQUFFLE1BQU0sSUFBSSxLQUFLLENBQUMsK0JBQStCLE9BQU8sV0FBVyxFQUFFLENBQUMsQ0FBQztZQUMxRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxXQUFXLElBQUksRUFBRSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1NBQzNDO2FBQU07WUFDTCxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLFdBQVcsQ0FBQyxDQUFDO1NBQ3hDO0lBQ0gsQ0FBQztDQUNGO0FBbGFELDRDQWthQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IER5bmFtb0RCRG9jdW1lbnRDbGllbnQsIFRyYW5zbGF0ZUNvbmZpZyB9IGZyb20gXCIuL0R5bmFtb0RCRG9jdW1lbnRDbGllbnRcIjtcbmltcG9ydCB7XG4gIEJhdGNoRXhlY3V0ZVN0YXRlbWVudENvbW1hbmQsXG4gIEJhdGNoRXhlY3V0ZVN0YXRlbWVudENvbW1hbmRJbnB1dCxcbiAgQmF0Y2hFeGVjdXRlU3RhdGVtZW50Q29tbWFuZE91dHB1dCxcbn0gZnJvbSBcIi4vY29tbWFuZHMvQmF0Y2hFeGVjdXRlU3RhdGVtZW50Q29tbWFuZFwiO1xuaW1wb3J0IHsgQmF0Y2hHZXRDb21tYW5kLCBCYXRjaEdldENvbW1hbmRJbnB1dCwgQmF0Y2hHZXRDb21tYW5kT3V0cHV0IH0gZnJvbSBcIi4vY29tbWFuZHMvQmF0Y2hHZXRDb21tYW5kXCI7XG5pbXBvcnQgeyBCYXRjaFdyaXRlQ29tbWFuZCwgQmF0Y2hXcml0ZUNvbW1hbmRJbnB1dCwgQmF0Y2hXcml0ZUNvbW1hbmRPdXRwdXQgfSBmcm9tIFwiLi9jb21tYW5kcy9CYXRjaFdyaXRlQ29tbWFuZFwiO1xuaW1wb3J0IHsgRGVsZXRlQ29tbWFuZCwgRGVsZXRlQ29tbWFuZElucHV0LCBEZWxldGVDb21tYW5kT3V0cHV0IH0gZnJvbSBcIi4vY29tbWFuZHMvRGVsZXRlQ29tbWFuZFwiO1xuaW1wb3J0IHtcbiAgRXhlY3V0ZVN0YXRlbWVudENvbW1hbmQsXG4gIEV4ZWN1dGVTdGF0ZW1lbnRDb21tYW5kSW5wdXQsXG4gIEV4ZWN1dGVTdGF0ZW1lbnRDb21tYW5kT3V0cHV0LFxufSBmcm9tIFwiLi9jb21tYW5kcy9FeGVjdXRlU3RhdGVtZW50Q29tbWFuZFwiO1xuaW1wb3J0IHtcbiAgRXhlY3V0ZVRyYW5zYWN0aW9uQ29tbWFuZCxcbiAgRXhlY3V0ZVRyYW5zYWN0aW9uQ29tbWFuZElucHV0LFxuICBFeGVjdXRlVHJhbnNhY3Rpb25Db21tYW5kT3V0cHV0LFxufSBmcm9tIFwiLi9jb21tYW5kcy9FeGVjdXRlVHJhbnNhY3Rpb25Db21tYW5kXCI7XG5pbXBvcnQgeyBHZXRDb21tYW5kLCBHZXRDb21tYW5kSW5wdXQsIEdldENvbW1hbmRPdXRwdXQgfSBmcm9tIFwiLi9jb21tYW5kcy9HZXRDb21tYW5kXCI7XG5pbXBvcnQgeyBQdXRDb21tYW5kLCBQdXRDb21tYW5kSW5wdXQsIFB1dENvbW1hbmRPdXRwdXQgfSBmcm9tIFwiLi9jb21tYW5kcy9QdXRDb21tYW5kXCI7XG5pbXBvcnQgeyBRdWVyeUNvbW1hbmQsIFF1ZXJ5Q29tbWFuZElucHV0LCBRdWVyeUNvbW1hbmRPdXRwdXQgfSBmcm9tIFwiLi9jb21tYW5kcy9RdWVyeUNvbW1hbmRcIjtcbmltcG9ydCB7IFNjYW5Db21tYW5kLCBTY2FuQ29tbWFuZElucHV0LCBTY2FuQ29tbWFuZE91dHB1dCB9IGZyb20gXCIuL2NvbW1hbmRzL1NjYW5Db21tYW5kXCI7XG5pbXBvcnQgeyBUcmFuc2FjdEdldENvbW1hbmQsIFRyYW5zYWN0R2V0Q29tbWFuZElucHV0LCBUcmFuc2FjdEdldENvbW1hbmRPdXRwdXQgfSBmcm9tIFwiLi9jb21tYW5kcy9UcmFuc2FjdEdldENvbW1hbmRcIjtcbmltcG9ydCB7XG4gIFRyYW5zYWN0V3JpdGVDb21tYW5kLFxuICBUcmFuc2FjdFdyaXRlQ29tbWFuZElucHV0LFxuICBUcmFuc2FjdFdyaXRlQ29tbWFuZE91dHB1dCxcbn0gZnJvbSBcIi4vY29tbWFuZHMvVHJhbnNhY3RXcml0ZUNvbW1hbmRcIjtcbmltcG9ydCB7IFVwZGF0ZUNvbW1hbmQsIFVwZGF0ZUNvbW1hbmRJbnB1dCwgVXBkYXRlQ29tbWFuZE91dHB1dCB9IGZyb20gXCIuL2NvbW1hbmRzL1VwZGF0ZUNvbW1hbmRcIjtcbmltcG9ydCB7IER5bmFtb0RCQ2xpZW50IH0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1keW5hbW9kYlwiO1xuaW1wb3J0IHsgSHR0cEhhbmRsZXJPcHRpb25zIGFzIF9fSHR0cEhhbmRsZXJPcHRpb25zIH0gZnJvbSBcIkBhd3Mtc2RrL3R5cGVzXCI7XG5cbi8qKlxuICogVGhlIGRvY3VtZW50IGNsaWVudCBzaW1wbGlmaWVzIHdvcmtpbmcgd2l0aCBpdGVtcyBpbiBBbWF6b24gRHluYW1vREIgYnlcbiAqIGFic3RyYWN0aW5nIGF3YXkgdGhlIG5vdGlvbiBvZiBhdHRyaWJ1dGUgdmFsdWVzLiBUaGlzIGFic3RyYWN0aW9uIGFubm90YXRlcyBuYXRpdmVcbiAqIEphdmFTY3JpcHQgdHlwZXMgc3VwcGxpZWQgYXMgaW5wdXQgcGFyYW1ldGVycywgYXMgd2VsbCBhcyBjb252ZXJ0cyBhbm5vdGF0ZWRcbiAqIHJlc3BvbnNlIGRhdGEgdG8gbmF0aXZlIEphdmFTY3JpcHQgdHlwZXMuXG4gKlxuICogIyMgTWFyc2hhbGxpbmcgSW5wdXQgYW5kIFVubWFyc2hhbGxpbmcgUmVzcG9uc2UgRGF0YVxuICpcbiAqIFRoZSBkb2N1bWVudCBjbGllbnQgYWZmb3JkcyBkZXZlbG9wZXJzIHRoZSB1c2Ugb2YgbmF0aXZlIEphdmFTY3JpcHQgdHlwZXNcbiAqIGluc3RlYWQgb2YgYEF0dHJpYnV0ZVZhbHVlYHMgdG8gc2ltcGxpZnkgdGhlIEphdmFTY3JpcHQgZGV2ZWxvcG1lbnRcbiAqIGV4cGVyaWVuY2Ugd2l0aCBBbWF6b24gRHluYW1vREIuIEphdmFTY3JpcHQgb2JqZWN0cyBwYXNzZWQgaW4gYXMgcGFyYW1ldGVyc1xuICogYXJlIG1hcnNoYWxsZWQgaW50byBgQXR0cmlidXRlVmFsdWVgIHNoYXBlcyByZXF1aXJlZCBieSBBbWF6b24gRHluYW1vREIuXG4gKiBSZXNwb25zZXMgZnJvbSBEeW5hbW9EQiBhcmUgdW5tYXJzaGFsbGVkIGludG8gcGxhaW4gSmF2YVNjcmlwdCBvYmplY3RzXG4gKiBieSB0aGUgYERvY3VtZW50Q2xpZW50YC4gVGhlIGBEb2N1bWVudENsaWVudGAgZG9lcyBub3QgYWNjZXB0XG4gKiBgQXR0cmlidXRlVmFsdWVgcyBpbiBmYXZvciBvZiBuYXRpdmUgSmF2YVNjcmlwdCB0eXBlcy5cbiAqXG4gKiB8ICAgICAgICAgIEphdmFTY3JpcHQgVHlwZSAgICAgICAgICB8IER5bmFtb0RCIEF0dHJpYnV0ZVZhbHVlIHxcbiAqIHwgOi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS06IHwgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gfFxuICogfCAgICAgICAgICAgICAgU3RyaW5nICAgICAgICAgICAgICAgfCBTICAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICAgICAgICAgIE51bWJlciAvIEJpZ0ludCAgICAgICAgICB8IE4gICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgIEJvb2xlYW4gICAgICAgICAgICAgIHwgQk9PTCAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgICAgICAgICAgICAgIG51bGwgICAgICAgICAgICAgICAgfCBOVUxMICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICAgICAgICAgICAgICAgQXJyYXkgICAgICAgICAgICAgICB8IEwgICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgICAgICAgICAgICAgIE9iamVjdCAgICAgICAgICAgICAgIHwgTSAgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCAgIFNldFxcPFVpbnQ4QXJyYXksIEJsb2IsIC4uLlxcPiAgICB8IEJTICAgICAgICAgICAgICAgICAgICAgIHxcbiAqIHwgICAgICAgU2V0XFw8TnVtYmVyLCBCaWdJbnRcXD4gICAgICAgfCBOUyAgICAgICAgICAgICAgICAgICAgICB8XG4gKiB8ICAgICAgICAgICBTZXRcXDxTdHJpbmdcXD4gICAgICAgICAgIHwgU1MgICAgICAgICAgICAgICAgICAgICAgfFxuICogfCBVaW50OEFycmF5LCBCdWZmZXIsIEZpbGUsIEJsb2IuLi4gfCBCICAgICAgICAgICAgICAgICAgICAgICB8XG4gKlxuICogIyMjIEV4YW1wbGVcbiAqXG4gKiBIZXJlIGlzIGFuIGV4YW1wbGUgbGlzdCB3aGljaCBpcyBzZW50IHRvIER5bmFtb0RCIGNsaWVudCBpbiBhbiBvcGVyYXRpb246XG4gKlxuICogYGBganNvblxuICogeyBcIkxcIjogW3sgXCJOVUxMXCI6IHRydWUgfSwgeyBcIkJPT0xcIjogZmFsc2UgfSwgeyBcIk5cIjogMSB9LCB7IFwiU1wiOiBcInR3b1wiIH1dIH1cbiAqIGBgYFxuICpcbiAqIFRoZSBEeW5hbW9EQiBkb2N1bWVudCBjbGllbnQgYWJzdHJhY3RzIHRoZSBhdHRyaWJ1dGUgdmFsdWVzIGFzIGZvbGxvd3MgaW5cbiAqIGJvdGggaW5wdXQgYW5kIG91dHB1dDpcbiAqXG4gKiBgYGBqc29uXG4gKiBbbnVsbCwgZmFsc2UsIDEsIFwidHdvXCJdXG4gKiBgYGBcbiAqXG4gKiBAc2VlIHtAbGluayBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9AYXdzLXNkay9jbGllbnQtZHluYW1vZGIgQGF3cy1zZGsvY2xpZW50LWR5bmFtb2RifVxuICovXG5leHBvcnQgY2xhc3MgRHluYW1vREJEb2N1bWVudCBleHRlbmRzIER5bmFtb0RCRG9jdW1lbnRDbGllbnQge1xuICBzdGF0aWMgZnJvbShjbGllbnQ6IER5bmFtb0RCQ2xpZW50LCB0cmFuc2xhdGVDb25maWc/OiBUcmFuc2xhdGVDb25maWcpIHtcbiAgICByZXR1cm4gbmV3IER5bmFtb0RCRG9jdW1lbnQoY2xpZW50LCB0cmFuc2xhdGVDb25maWcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFjY2VwdHMgbmF0aXZlIEphdmFTY3JpcHQgdHlwZXMgaW5zdGVhZCBvZiBgQXR0cmlidXRlVmFsdWVgcywgYW5kIGNhbGxzXG4gICAqIEJhdGNoRXhlY3V0ZVN0YXRlbWVudENvbW1hbmQgb3BlcmF0aW9uIGZyb20ge0BsaW5rIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL0Bhd3Mtc2RrL2NsaWVudC1keW5hbW9kYiBAYXdzLXNkay9jbGllbnQtZHluYW1vZGJ9LlxuICAgKlxuICAgKiBKYXZhU2NyaXB0IG9iamVjdHMgcGFzc2VkIGluIGFzIHBhcmFtZXRlcnMgYXJlIG1hcnNoYWxsZWQgaW50byBgQXR0cmlidXRlVmFsdWVgIHNoYXBlc1xuICAgKiByZXF1aXJlZCBieSBBbWF6b24gRHluYW1vREIuIFJlc3BvbnNlcyBmcm9tIER5bmFtb0RCIGFyZSB1bm1hcnNoYWxsZWQgaW50byBwbGFpbiBKYXZhU2NyaXB0IG9iamVjdHMuXG4gICAqL1xuICBwdWJsaWMgYmF0Y2hFeGVjdXRlU3RhdGVtZW50KFxuICAgIGFyZ3M6IEJhdGNoRXhlY3V0ZVN0YXRlbWVudENvbW1hbmRJbnB1dCxcbiAgICBvcHRpb25zPzogX19IdHRwSGFuZGxlck9wdGlvbnNcbiAgKTogUHJvbWlzZTxCYXRjaEV4ZWN1dGVTdGF0ZW1lbnRDb21tYW5kT3V0cHV0PjtcbiAgcHVibGljIGJhdGNoRXhlY3V0ZVN0YXRlbWVudChcbiAgICBhcmdzOiBCYXRjaEV4ZWN1dGVTdGF0ZW1lbnRDb21tYW5kSW5wdXQsXG4gICAgY2I6IChlcnI6IGFueSwgZGF0YT86IEJhdGNoRXhlY3V0ZVN0YXRlbWVudENvbW1hbmRPdXRwdXQpID0+IHZvaWRcbiAgKTogdm9pZDtcbiAgcHVibGljIGJhdGNoRXhlY3V0ZVN0YXRlbWVudChcbiAgICBhcmdzOiBCYXRjaEV4ZWN1dGVTdGF0ZW1lbnRDb21tYW5kSW5wdXQsXG4gICAgb3B0aW9uczogX19IdHRwSGFuZGxlck9wdGlvbnMsXG4gICAgY2I6IChlcnI6IGFueSwgZGF0YT86IEJhdGNoRXhlY3V0ZVN0YXRlbWVudENvbW1hbmRPdXRwdXQpID0+IHZvaWRcbiAgKTogdm9pZDtcbiAgcHVibGljIGJhdGNoRXhlY3V0ZVN0YXRlbWVudChcbiAgICBhcmdzOiBCYXRjaEV4ZWN1dGVTdGF0ZW1lbnRDb21tYW5kSW5wdXQsXG4gICAgb3B0aW9uc09yQ2I/OiBfX0h0dHBIYW5kbGVyT3B0aW9ucyB8ICgoZXJyOiBhbnksIGRhdGE/OiBCYXRjaEV4ZWN1dGVTdGF0ZW1lbnRDb21tYW5kT3V0cHV0KSA9PiB2b2lkKSxcbiAgICBjYj86IChlcnI6IGFueSwgZGF0YT86IEJhdGNoRXhlY3V0ZVN0YXRlbWVudENvbW1hbmRPdXRwdXQpID0+IHZvaWRcbiAgKTogUHJvbWlzZTxCYXRjaEV4ZWN1dGVTdGF0ZW1lbnRDb21tYW5kT3V0cHV0PiB8IHZvaWQge1xuICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgQmF0Y2hFeGVjdXRlU3RhdGVtZW50Q29tbWFuZChhcmdzKTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHRoaXMuc2VuZChjb21tYW5kLCBvcHRpb25zT3JDYik7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYiAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3QgaHR0cCBvcHRpb25zIGJ1dCBnZXQgJHt0eXBlb2Ygb3B0aW9uc09yQ2J9YCk7XG4gICAgICB0aGlzLnNlbmQoY29tbWFuZCwgb3B0aW9uc09yQ2IgfHwge30sIGNiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuc2VuZChjb21tYW5kLCBvcHRpb25zT3JDYik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFjY2VwdHMgbmF0aXZlIEphdmFTY3JpcHQgdHlwZXMgaW5zdGVhZCBvZiBgQXR0cmlidXRlVmFsdWVgcywgYW5kIGNhbGxzXG4gICAqIEJhdGNoR2V0SXRlbUNvbW1hbmQgb3BlcmF0aW9uIGZyb20ge0BsaW5rIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL0Bhd3Mtc2RrL2NsaWVudC1keW5hbW9kYiBAYXdzLXNkay9jbGllbnQtZHluYW1vZGJ9LlxuICAgKlxuICAgKiBKYXZhU2NyaXB0IG9iamVjdHMgcGFzc2VkIGluIGFzIHBhcmFtZXRlcnMgYXJlIG1hcnNoYWxsZWQgaW50byBgQXR0cmlidXRlVmFsdWVgIHNoYXBlc1xuICAgKiByZXF1aXJlZCBieSBBbWF6b24gRHluYW1vREIuIFJlc3BvbnNlcyBmcm9tIER5bmFtb0RCIGFyZSB1bm1hcnNoYWxsZWQgaW50byBwbGFpbiBKYXZhU2NyaXB0IG9iamVjdHMuXG4gICAqL1xuICBwdWJsaWMgYmF0Y2hHZXQoYXJnczogQmF0Y2hHZXRDb21tYW5kSW5wdXQsIG9wdGlvbnM/OiBfX0h0dHBIYW5kbGVyT3B0aW9ucyk6IFByb21pc2U8QmF0Y2hHZXRDb21tYW5kT3V0cHV0PjtcbiAgcHVibGljIGJhdGNoR2V0KGFyZ3M6IEJhdGNoR2V0Q29tbWFuZElucHV0LCBjYjogKGVycjogYW55LCBkYXRhPzogQmF0Y2hHZXRDb21tYW5kT3V0cHV0KSA9PiB2b2lkKTogdm9pZDtcbiAgcHVibGljIGJhdGNoR2V0KFxuICAgIGFyZ3M6IEJhdGNoR2V0Q29tbWFuZElucHV0LFxuICAgIG9wdGlvbnM6IF9fSHR0cEhhbmRsZXJPcHRpb25zLFxuICAgIGNiOiAoZXJyOiBhbnksIGRhdGE/OiBCYXRjaEdldENvbW1hbmRPdXRwdXQpID0+IHZvaWRcbiAgKTogdm9pZDtcbiAgcHVibGljIGJhdGNoR2V0KFxuICAgIGFyZ3M6IEJhdGNoR2V0Q29tbWFuZElucHV0LFxuICAgIG9wdGlvbnNPckNiPzogX19IdHRwSGFuZGxlck9wdGlvbnMgfCAoKGVycjogYW55LCBkYXRhPzogQmF0Y2hHZXRDb21tYW5kT3V0cHV0KSA9PiB2b2lkKSxcbiAgICBjYj86IChlcnI6IGFueSwgZGF0YT86IEJhdGNoR2V0Q29tbWFuZE91dHB1dCkgPT4gdm9pZFxuICApOiBQcm9taXNlPEJhdGNoR2V0Q29tbWFuZE91dHB1dD4gfCB2b2lkIHtcbiAgICBjb25zdCBjb21tYW5kID0gbmV3IEJhdGNoR2V0Q29tbWFuZChhcmdzKTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHRoaXMuc2VuZChjb21tYW5kLCBvcHRpb25zT3JDYik7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYiAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3QgaHR0cCBvcHRpb25zIGJ1dCBnZXQgJHt0eXBlb2Ygb3B0aW9uc09yQ2J9YCk7XG4gICAgICB0aGlzLnNlbmQoY29tbWFuZCwgb3B0aW9uc09yQ2IgfHwge30sIGNiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuc2VuZChjb21tYW5kLCBvcHRpb25zT3JDYik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFjY2VwdHMgbmF0aXZlIEphdmFTY3JpcHQgdHlwZXMgaW5zdGVhZCBvZiBgQXR0cmlidXRlVmFsdWVgcywgYW5kIGNhbGxzXG4gICAqIEJhdGNoV3JpdGVJdGVtQ29tbWFuZCBvcGVyYXRpb24gZnJvbSB7QGxpbmsgaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvQGF3cy1zZGsvY2xpZW50LWR5bmFtb2RiIEBhd3Mtc2RrL2NsaWVudC1keW5hbW9kYn0uXG4gICAqXG4gICAqIEphdmFTY3JpcHQgb2JqZWN0cyBwYXNzZWQgaW4gYXMgcGFyYW1ldGVycyBhcmUgbWFyc2hhbGxlZCBpbnRvIGBBdHRyaWJ1dGVWYWx1ZWAgc2hhcGVzXG4gICAqIHJlcXVpcmVkIGJ5IEFtYXpvbiBEeW5hbW9EQi4gUmVzcG9uc2VzIGZyb20gRHluYW1vREIgYXJlIHVubWFyc2hhbGxlZCBpbnRvIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cy5cbiAgICovXG4gIHB1YmxpYyBiYXRjaFdyaXRlKGFyZ3M6IEJhdGNoV3JpdGVDb21tYW5kSW5wdXQsIG9wdGlvbnM/OiBfX0h0dHBIYW5kbGVyT3B0aW9ucyk6IFByb21pc2U8QmF0Y2hXcml0ZUNvbW1hbmRPdXRwdXQ+O1xuICBwdWJsaWMgYmF0Y2hXcml0ZShhcmdzOiBCYXRjaFdyaXRlQ29tbWFuZElucHV0LCBjYjogKGVycjogYW55LCBkYXRhPzogQmF0Y2hXcml0ZUNvbW1hbmRPdXRwdXQpID0+IHZvaWQpOiB2b2lkO1xuICBwdWJsaWMgYmF0Y2hXcml0ZShcbiAgICBhcmdzOiBCYXRjaFdyaXRlQ29tbWFuZElucHV0LFxuICAgIG9wdGlvbnM6IF9fSHR0cEhhbmRsZXJPcHRpb25zLFxuICAgIGNiOiAoZXJyOiBhbnksIGRhdGE/OiBCYXRjaFdyaXRlQ29tbWFuZE91dHB1dCkgPT4gdm9pZFxuICApOiB2b2lkO1xuICBwdWJsaWMgYmF0Y2hXcml0ZShcbiAgICBhcmdzOiBCYXRjaFdyaXRlQ29tbWFuZElucHV0LFxuICAgIG9wdGlvbnNPckNiPzogX19IdHRwSGFuZGxlck9wdGlvbnMgfCAoKGVycjogYW55LCBkYXRhPzogQmF0Y2hXcml0ZUNvbW1hbmRPdXRwdXQpID0+IHZvaWQpLFxuICAgIGNiPzogKGVycjogYW55LCBkYXRhPzogQmF0Y2hXcml0ZUNvbW1hbmRPdXRwdXQpID0+IHZvaWRcbiAgKTogUHJvbWlzZTxCYXRjaFdyaXRlQ29tbWFuZE91dHB1dD4gfCB2b2lkIHtcbiAgICBjb25zdCBjb21tYW5kID0gbmV3IEJhdGNoV3JpdGVDb21tYW5kKGFyZ3MpO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhpcy5zZW5kKGNvbW1hbmQsIG9wdGlvbnNPckNiKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNiICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdCBodHRwIG9wdGlvbnMgYnV0IGdldCAke3R5cGVvZiBvcHRpb25zT3JDYn1gKTtcbiAgICAgIHRoaXMuc2VuZChjb21tYW5kLCBvcHRpb25zT3JDYiB8fCB7fSwgY2IpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5zZW5kKGNvbW1hbmQsIG9wdGlvbnNPckNiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWNjZXB0cyBuYXRpdmUgSmF2YVNjcmlwdCB0eXBlcyBpbnN0ZWFkIG9mIGBBdHRyaWJ1dGVWYWx1ZWBzLCBhbmQgY2FsbHNcbiAgICogRGVsZXRlSXRlbUNvbW1hbmQgb3BlcmF0aW9uIGZyb20ge0BsaW5rIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL0Bhd3Mtc2RrL2NsaWVudC1keW5hbW9kYiBAYXdzLXNkay9jbGllbnQtZHluYW1vZGJ9LlxuICAgKlxuICAgKiBKYXZhU2NyaXB0IG9iamVjdHMgcGFzc2VkIGluIGFzIHBhcmFtZXRlcnMgYXJlIG1hcnNoYWxsZWQgaW50byBgQXR0cmlidXRlVmFsdWVgIHNoYXBlc1xuICAgKiByZXF1aXJlZCBieSBBbWF6b24gRHluYW1vREIuIFJlc3BvbnNlcyBmcm9tIER5bmFtb0RCIGFyZSB1bm1hcnNoYWxsZWQgaW50byBwbGFpbiBKYXZhU2NyaXB0IG9iamVjdHMuXG4gICAqL1xuICBwdWJsaWMgZGVsZXRlKGFyZ3M6IERlbGV0ZUNvbW1hbmRJbnB1dCwgb3B0aW9ucz86IF9fSHR0cEhhbmRsZXJPcHRpb25zKTogUHJvbWlzZTxEZWxldGVDb21tYW5kT3V0cHV0PjtcbiAgcHVibGljIGRlbGV0ZShhcmdzOiBEZWxldGVDb21tYW5kSW5wdXQsIGNiOiAoZXJyOiBhbnksIGRhdGE/OiBEZWxldGVDb21tYW5kT3V0cHV0KSA9PiB2b2lkKTogdm9pZDtcbiAgcHVibGljIGRlbGV0ZShcbiAgICBhcmdzOiBEZWxldGVDb21tYW5kSW5wdXQsXG4gICAgb3B0aW9uczogX19IdHRwSGFuZGxlck9wdGlvbnMsXG4gICAgY2I6IChlcnI6IGFueSwgZGF0YT86IERlbGV0ZUNvbW1hbmRPdXRwdXQpID0+IHZvaWRcbiAgKTogdm9pZDtcbiAgcHVibGljIGRlbGV0ZShcbiAgICBhcmdzOiBEZWxldGVDb21tYW5kSW5wdXQsXG4gICAgb3B0aW9uc09yQ2I/OiBfX0h0dHBIYW5kbGVyT3B0aW9ucyB8ICgoZXJyOiBhbnksIGRhdGE/OiBEZWxldGVDb21tYW5kT3V0cHV0KSA9PiB2b2lkKSxcbiAgICBjYj86IChlcnI6IGFueSwgZGF0YT86IERlbGV0ZUNvbW1hbmRPdXRwdXQpID0+IHZvaWRcbiAgKTogUHJvbWlzZTxEZWxldGVDb21tYW5kT3V0cHV0PiB8IHZvaWQge1xuICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgRGVsZXRlQ29tbWFuZChhcmdzKTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHRoaXMuc2VuZChjb21tYW5kLCBvcHRpb25zT3JDYik7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYiAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3QgaHR0cCBvcHRpb25zIGJ1dCBnZXQgJHt0eXBlb2Ygb3B0aW9uc09yQ2J9YCk7XG4gICAgICB0aGlzLnNlbmQoY29tbWFuZCwgb3B0aW9uc09yQ2IgfHwge30sIGNiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuc2VuZChjb21tYW5kLCBvcHRpb25zT3JDYik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFjY2VwdHMgbmF0aXZlIEphdmFTY3JpcHQgdHlwZXMgaW5zdGVhZCBvZiBgQXR0cmlidXRlVmFsdWVgcywgYW5kIGNhbGxzXG4gICAqIEV4ZWN1dGVTdGF0ZW1lbnRDb21tYW5kIG9wZXJhdGlvbiBmcm9tIHtAbGluayBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9AYXdzLXNkay9jbGllbnQtZHluYW1vZGIgQGF3cy1zZGsvY2xpZW50LWR5bmFtb2RifS5cbiAgICpcbiAgICogSmF2YVNjcmlwdCBvYmplY3RzIHBhc3NlZCBpbiBhcyBwYXJhbWV0ZXJzIGFyZSBtYXJzaGFsbGVkIGludG8gYEF0dHJpYnV0ZVZhbHVlYCBzaGFwZXNcbiAgICogcmVxdWlyZWQgYnkgQW1hem9uIER5bmFtb0RCLiBSZXNwb25zZXMgZnJvbSBEeW5hbW9EQiBhcmUgdW5tYXJzaGFsbGVkIGludG8gcGxhaW4gSmF2YVNjcmlwdCBvYmplY3RzLlxuICAgKi9cbiAgcHVibGljIGV4ZWN1dGVTdGF0ZW1lbnQoXG4gICAgYXJnczogRXhlY3V0ZVN0YXRlbWVudENvbW1hbmRJbnB1dCxcbiAgICBvcHRpb25zPzogX19IdHRwSGFuZGxlck9wdGlvbnNcbiAgKTogUHJvbWlzZTxFeGVjdXRlU3RhdGVtZW50Q29tbWFuZE91dHB1dD47XG4gIHB1YmxpYyBleGVjdXRlU3RhdGVtZW50KFxuICAgIGFyZ3M6IEV4ZWN1dGVTdGF0ZW1lbnRDb21tYW5kSW5wdXQsXG4gICAgY2I6IChlcnI6IGFueSwgZGF0YT86IEV4ZWN1dGVTdGF0ZW1lbnRDb21tYW5kT3V0cHV0KSA9PiB2b2lkXG4gICk6IHZvaWQ7XG4gIHB1YmxpYyBleGVjdXRlU3RhdGVtZW50KFxuICAgIGFyZ3M6IEV4ZWN1dGVTdGF0ZW1lbnRDb21tYW5kSW5wdXQsXG4gICAgb3B0aW9uczogX19IdHRwSGFuZGxlck9wdGlvbnMsXG4gICAgY2I6IChlcnI6IGFueSwgZGF0YT86IEV4ZWN1dGVTdGF0ZW1lbnRDb21tYW5kT3V0cHV0KSA9PiB2b2lkXG4gICk6IHZvaWQ7XG4gIHB1YmxpYyBleGVjdXRlU3RhdGVtZW50KFxuICAgIGFyZ3M6IEV4ZWN1dGVTdGF0ZW1lbnRDb21tYW5kSW5wdXQsXG4gICAgb3B0aW9uc09yQ2I/OiBfX0h0dHBIYW5kbGVyT3B0aW9ucyB8ICgoZXJyOiBhbnksIGRhdGE/OiBFeGVjdXRlU3RhdGVtZW50Q29tbWFuZE91dHB1dCkgPT4gdm9pZCksXG4gICAgY2I/OiAoZXJyOiBhbnksIGRhdGE/OiBFeGVjdXRlU3RhdGVtZW50Q29tbWFuZE91dHB1dCkgPT4gdm9pZFxuICApOiBQcm9taXNlPEV4ZWN1dGVTdGF0ZW1lbnRDb21tYW5kT3V0cHV0PiB8IHZvaWQge1xuICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgRXhlY3V0ZVN0YXRlbWVudENvbW1hbmQoYXJncyk7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aGlzLnNlbmQoY29tbWFuZCwgb3B0aW9uc09yQ2IpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2IgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihgRXhwZWN0IGh0dHAgb3B0aW9ucyBidXQgZ2V0ICR7dHlwZW9mIG9wdGlvbnNPckNifWApO1xuICAgICAgdGhpcy5zZW5kKGNvbW1hbmQsIG9wdGlvbnNPckNiIHx8IHt9LCBjYik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnNlbmQoY29tbWFuZCwgb3B0aW9uc09yQ2IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBY2NlcHRzIG5hdGl2ZSBKYXZhU2NyaXB0IHR5cGVzIGluc3RlYWQgb2YgYEF0dHJpYnV0ZVZhbHVlYHMsIGFuZCBjYWxsc1xuICAgKiBFeGVjdXRlVHJhbnNhY3Rpb25Db21tYW5kIG9wZXJhdGlvbiBmcm9tIHtAbGluayBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9AYXdzLXNkay9jbGllbnQtZHluYW1vZGIgQGF3cy1zZGsvY2xpZW50LWR5bmFtb2RifS5cbiAgICpcbiAgICogSmF2YVNjcmlwdCBvYmplY3RzIHBhc3NlZCBpbiBhcyBwYXJhbWV0ZXJzIGFyZSBtYXJzaGFsbGVkIGludG8gYEF0dHJpYnV0ZVZhbHVlYCBzaGFwZXNcbiAgICogcmVxdWlyZWQgYnkgQW1hem9uIER5bmFtb0RCLiBSZXNwb25zZXMgZnJvbSBEeW5hbW9EQiBhcmUgdW5tYXJzaGFsbGVkIGludG8gcGxhaW4gSmF2YVNjcmlwdCBvYmplY3RzLlxuICAgKi9cbiAgcHVibGljIGV4ZWN1dGVUcmFuc2FjdGlvbihcbiAgICBhcmdzOiBFeGVjdXRlVHJhbnNhY3Rpb25Db21tYW5kSW5wdXQsXG4gICAgb3B0aW9ucz86IF9fSHR0cEhhbmRsZXJPcHRpb25zXG4gICk6IFByb21pc2U8RXhlY3V0ZVRyYW5zYWN0aW9uQ29tbWFuZE91dHB1dD47XG4gIHB1YmxpYyBleGVjdXRlVHJhbnNhY3Rpb24oXG4gICAgYXJnczogRXhlY3V0ZVRyYW5zYWN0aW9uQ29tbWFuZElucHV0LFxuICAgIGNiOiAoZXJyOiBhbnksIGRhdGE/OiBFeGVjdXRlVHJhbnNhY3Rpb25Db21tYW5kT3V0cHV0KSA9PiB2b2lkXG4gICk6IHZvaWQ7XG4gIHB1YmxpYyBleGVjdXRlVHJhbnNhY3Rpb24oXG4gICAgYXJnczogRXhlY3V0ZVRyYW5zYWN0aW9uQ29tbWFuZElucHV0LFxuICAgIG9wdGlvbnM6IF9fSHR0cEhhbmRsZXJPcHRpb25zLFxuICAgIGNiOiAoZXJyOiBhbnksIGRhdGE/OiBFeGVjdXRlVHJhbnNhY3Rpb25Db21tYW5kT3V0cHV0KSA9PiB2b2lkXG4gICk6IHZvaWQ7XG4gIHB1YmxpYyBleGVjdXRlVHJhbnNhY3Rpb24oXG4gICAgYXJnczogRXhlY3V0ZVRyYW5zYWN0aW9uQ29tbWFuZElucHV0LFxuICAgIG9wdGlvbnNPckNiPzogX19IdHRwSGFuZGxlck9wdGlvbnMgfCAoKGVycjogYW55LCBkYXRhPzogRXhlY3V0ZVRyYW5zYWN0aW9uQ29tbWFuZE91dHB1dCkgPT4gdm9pZCksXG4gICAgY2I/OiAoZXJyOiBhbnksIGRhdGE/OiBFeGVjdXRlVHJhbnNhY3Rpb25Db21tYW5kT3V0cHV0KSA9PiB2b2lkXG4gICk6IFByb21pc2U8RXhlY3V0ZVRyYW5zYWN0aW9uQ29tbWFuZE91dHB1dD4gfCB2b2lkIHtcbiAgICBjb25zdCBjb21tYW5kID0gbmV3IEV4ZWN1dGVUcmFuc2FjdGlvbkNvbW1hbmQoYXJncyk7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aGlzLnNlbmQoY29tbWFuZCwgb3B0aW9uc09yQ2IpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2IgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihgRXhwZWN0IGh0dHAgb3B0aW9ucyBidXQgZ2V0ICR7dHlwZW9mIG9wdGlvbnNPckNifWApO1xuICAgICAgdGhpcy5zZW5kKGNvbW1hbmQsIG9wdGlvbnNPckNiIHx8IHt9LCBjYik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnNlbmQoY29tbWFuZCwgb3B0aW9uc09yQ2IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBY2NlcHRzIG5hdGl2ZSBKYXZhU2NyaXB0IHR5cGVzIGluc3RlYWQgb2YgYEF0dHJpYnV0ZVZhbHVlYHMsIGFuZCBjYWxsc1xuICAgKiBHZXRJdGVtQ29tbWFuZCBvcGVyYXRpb24gZnJvbSB7QGxpbmsgaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvQGF3cy1zZGsvY2xpZW50LWR5bmFtb2RiIEBhd3Mtc2RrL2NsaWVudC1keW5hbW9kYn0uXG4gICAqXG4gICAqIEphdmFTY3JpcHQgb2JqZWN0cyBwYXNzZWQgaW4gYXMgcGFyYW1ldGVycyBhcmUgbWFyc2hhbGxlZCBpbnRvIGBBdHRyaWJ1dGVWYWx1ZWAgc2hhcGVzXG4gICAqIHJlcXVpcmVkIGJ5IEFtYXpvbiBEeW5hbW9EQi4gUmVzcG9uc2VzIGZyb20gRHluYW1vREIgYXJlIHVubWFyc2hhbGxlZCBpbnRvIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cy5cbiAgICovXG4gIHB1YmxpYyBnZXQoYXJnczogR2V0Q29tbWFuZElucHV0LCBvcHRpb25zPzogX19IdHRwSGFuZGxlck9wdGlvbnMpOiBQcm9taXNlPEdldENvbW1hbmRPdXRwdXQ+O1xuICBwdWJsaWMgZ2V0KGFyZ3M6IEdldENvbW1hbmRJbnB1dCwgY2I6IChlcnI6IGFueSwgZGF0YT86IEdldENvbW1hbmRPdXRwdXQpID0+IHZvaWQpOiB2b2lkO1xuICBwdWJsaWMgZ2V0KFxuICAgIGFyZ3M6IEdldENvbW1hbmRJbnB1dCxcbiAgICBvcHRpb25zOiBfX0h0dHBIYW5kbGVyT3B0aW9ucyxcbiAgICBjYjogKGVycjogYW55LCBkYXRhPzogR2V0Q29tbWFuZE91dHB1dCkgPT4gdm9pZFxuICApOiB2b2lkO1xuICBwdWJsaWMgZ2V0KFxuICAgIGFyZ3M6IEdldENvbW1hbmRJbnB1dCxcbiAgICBvcHRpb25zT3JDYj86IF9fSHR0cEhhbmRsZXJPcHRpb25zIHwgKChlcnI6IGFueSwgZGF0YT86IEdldENvbW1hbmRPdXRwdXQpID0+IHZvaWQpLFxuICAgIGNiPzogKGVycjogYW55LCBkYXRhPzogR2V0Q29tbWFuZE91dHB1dCkgPT4gdm9pZFxuICApOiBQcm9taXNlPEdldENvbW1hbmRPdXRwdXQ+IHwgdm9pZCB7XG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBHZXRDb21tYW5kKGFyZ3MpO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhpcy5zZW5kKGNvbW1hbmQsIG9wdGlvbnNPckNiKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNiICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdCBodHRwIG9wdGlvbnMgYnV0IGdldCAke3R5cGVvZiBvcHRpb25zT3JDYn1gKTtcbiAgICAgIHRoaXMuc2VuZChjb21tYW5kLCBvcHRpb25zT3JDYiB8fCB7fSwgY2IpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5zZW5kKGNvbW1hbmQsIG9wdGlvbnNPckNiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWNjZXB0cyBuYXRpdmUgSmF2YVNjcmlwdCB0eXBlcyBpbnN0ZWFkIG9mIGBBdHRyaWJ1dGVWYWx1ZWBzLCBhbmQgY2FsbHNcbiAgICogUHV0SXRlbUNvbW1hbmQgb3BlcmF0aW9uIGZyb20ge0BsaW5rIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL0Bhd3Mtc2RrL2NsaWVudC1keW5hbW9kYiBAYXdzLXNkay9jbGllbnQtZHluYW1vZGJ9LlxuICAgKlxuICAgKiBKYXZhU2NyaXB0IG9iamVjdHMgcGFzc2VkIGluIGFzIHBhcmFtZXRlcnMgYXJlIG1hcnNoYWxsZWQgaW50byBgQXR0cmlidXRlVmFsdWVgIHNoYXBlc1xuICAgKiByZXF1aXJlZCBieSBBbWF6b24gRHluYW1vREIuIFJlc3BvbnNlcyBmcm9tIER5bmFtb0RCIGFyZSB1bm1hcnNoYWxsZWQgaW50byBwbGFpbiBKYXZhU2NyaXB0IG9iamVjdHMuXG4gICAqL1xuICBwdWJsaWMgcHV0KGFyZ3M6IFB1dENvbW1hbmRJbnB1dCwgb3B0aW9ucz86IF9fSHR0cEhhbmRsZXJPcHRpb25zKTogUHJvbWlzZTxQdXRDb21tYW5kT3V0cHV0PjtcbiAgcHVibGljIHB1dChhcmdzOiBQdXRDb21tYW5kSW5wdXQsIGNiOiAoZXJyOiBhbnksIGRhdGE/OiBQdXRDb21tYW5kT3V0cHV0KSA9PiB2b2lkKTogdm9pZDtcbiAgcHVibGljIHB1dChcbiAgICBhcmdzOiBQdXRDb21tYW5kSW5wdXQsXG4gICAgb3B0aW9uczogX19IdHRwSGFuZGxlck9wdGlvbnMsXG4gICAgY2I6IChlcnI6IGFueSwgZGF0YT86IFB1dENvbW1hbmRPdXRwdXQpID0+IHZvaWRcbiAgKTogdm9pZDtcbiAgcHVibGljIHB1dChcbiAgICBhcmdzOiBQdXRDb21tYW5kSW5wdXQsXG4gICAgb3B0aW9uc09yQ2I/OiBfX0h0dHBIYW5kbGVyT3B0aW9ucyB8ICgoZXJyOiBhbnksIGRhdGE/OiBQdXRDb21tYW5kT3V0cHV0KSA9PiB2b2lkKSxcbiAgICBjYj86IChlcnI6IGFueSwgZGF0YT86IFB1dENvbW1hbmRPdXRwdXQpID0+IHZvaWRcbiAgKTogUHJvbWlzZTxQdXRDb21tYW5kT3V0cHV0PiB8IHZvaWQge1xuICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgUHV0Q29tbWFuZChhcmdzKTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHRoaXMuc2VuZChjb21tYW5kLCBvcHRpb25zT3JDYik7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYiAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3QgaHR0cCBvcHRpb25zIGJ1dCBnZXQgJHt0eXBlb2Ygb3B0aW9uc09yQ2J9YCk7XG4gICAgICB0aGlzLnNlbmQoY29tbWFuZCwgb3B0aW9uc09yQ2IgfHwge30sIGNiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuc2VuZChjb21tYW5kLCBvcHRpb25zT3JDYik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFjY2VwdHMgbmF0aXZlIEphdmFTY3JpcHQgdHlwZXMgaW5zdGVhZCBvZiBgQXR0cmlidXRlVmFsdWVgcywgYW5kIGNhbGxzXG4gICAqIFF1ZXJ5Q29tbWFuZCBvcGVyYXRpb24gZnJvbSB7QGxpbmsgaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvQGF3cy1zZGsvY2xpZW50LWR5bmFtb2RiIEBhd3Mtc2RrL2NsaWVudC1keW5hbW9kYn0uXG4gICAqXG4gICAqIEphdmFTY3JpcHQgb2JqZWN0cyBwYXNzZWQgaW4gYXMgcGFyYW1ldGVycyBhcmUgbWFyc2hhbGxlZCBpbnRvIGBBdHRyaWJ1dGVWYWx1ZWAgc2hhcGVzXG4gICAqIHJlcXVpcmVkIGJ5IEFtYXpvbiBEeW5hbW9EQi4gUmVzcG9uc2VzIGZyb20gRHluYW1vREIgYXJlIHVubWFyc2hhbGxlZCBpbnRvIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cy5cbiAgICovXG4gIHB1YmxpYyBxdWVyeShhcmdzOiBRdWVyeUNvbW1hbmRJbnB1dCwgb3B0aW9ucz86IF9fSHR0cEhhbmRsZXJPcHRpb25zKTogUHJvbWlzZTxRdWVyeUNvbW1hbmRPdXRwdXQ+O1xuICBwdWJsaWMgcXVlcnkoYXJnczogUXVlcnlDb21tYW5kSW5wdXQsIGNiOiAoZXJyOiBhbnksIGRhdGE/OiBRdWVyeUNvbW1hbmRPdXRwdXQpID0+IHZvaWQpOiB2b2lkO1xuICBwdWJsaWMgcXVlcnkoXG4gICAgYXJnczogUXVlcnlDb21tYW5kSW5wdXQsXG4gICAgb3B0aW9uczogX19IdHRwSGFuZGxlck9wdGlvbnMsXG4gICAgY2I6IChlcnI6IGFueSwgZGF0YT86IFF1ZXJ5Q29tbWFuZE91dHB1dCkgPT4gdm9pZFxuICApOiB2b2lkO1xuICBwdWJsaWMgcXVlcnkoXG4gICAgYXJnczogUXVlcnlDb21tYW5kSW5wdXQsXG4gICAgb3B0aW9uc09yQ2I/OiBfX0h0dHBIYW5kbGVyT3B0aW9ucyB8ICgoZXJyOiBhbnksIGRhdGE/OiBRdWVyeUNvbW1hbmRPdXRwdXQpID0+IHZvaWQpLFxuICAgIGNiPzogKGVycjogYW55LCBkYXRhPzogUXVlcnlDb21tYW5kT3V0cHV0KSA9PiB2b2lkXG4gICk6IFByb21pc2U8UXVlcnlDb21tYW5kT3V0cHV0PiB8IHZvaWQge1xuICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgUXVlcnlDb21tYW5kKGFyZ3MpO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhpcy5zZW5kKGNvbW1hbmQsIG9wdGlvbnNPckNiKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNiICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdCBodHRwIG9wdGlvbnMgYnV0IGdldCAke3R5cGVvZiBvcHRpb25zT3JDYn1gKTtcbiAgICAgIHRoaXMuc2VuZChjb21tYW5kLCBvcHRpb25zT3JDYiB8fCB7fSwgY2IpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5zZW5kKGNvbW1hbmQsIG9wdGlvbnNPckNiKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWNjZXB0cyBuYXRpdmUgSmF2YVNjcmlwdCB0eXBlcyBpbnN0ZWFkIG9mIGBBdHRyaWJ1dGVWYWx1ZWBzLCBhbmQgY2FsbHNcbiAgICogU2NhbkNvbW1hbmQgb3BlcmF0aW9uIGZyb20ge0BsaW5rIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL0Bhd3Mtc2RrL2NsaWVudC1keW5hbW9kYiBAYXdzLXNkay9jbGllbnQtZHluYW1vZGJ9LlxuICAgKlxuICAgKiBKYXZhU2NyaXB0IG9iamVjdHMgcGFzc2VkIGluIGFzIHBhcmFtZXRlcnMgYXJlIG1hcnNoYWxsZWQgaW50byBgQXR0cmlidXRlVmFsdWVgIHNoYXBlc1xuICAgKiByZXF1aXJlZCBieSBBbWF6b24gRHluYW1vREIuIFJlc3BvbnNlcyBmcm9tIER5bmFtb0RCIGFyZSB1bm1hcnNoYWxsZWQgaW50byBwbGFpbiBKYXZhU2NyaXB0IG9iamVjdHMuXG4gICAqL1xuICBwdWJsaWMgc2NhbihhcmdzOiBTY2FuQ29tbWFuZElucHV0LCBvcHRpb25zPzogX19IdHRwSGFuZGxlck9wdGlvbnMpOiBQcm9taXNlPFNjYW5Db21tYW5kT3V0cHV0PjtcbiAgcHVibGljIHNjYW4oYXJnczogU2NhbkNvbW1hbmRJbnB1dCwgY2I6IChlcnI6IGFueSwgZGF0YT86IFNjYW5Db21tYW5kT3V0cHV0KSA9PiB2b2lkKTogdm9pZDtcbiAgcHVibGljIHNjYW4oXG4gICAgYXJnczogU2NhbkNvbW1hbmRJbnB1dCxcbiAgICBvcHRpb25zOiBfX0h0dHBIYW5kbGVyT3B0aW9ucyxcbiAgICBjYjogKGVycjogYW55LCBkYXRhPzogU2NhbkNvbW1hbmRPdXRwdXQpID0+IHZvaWRcbiAgKTogdm9pZDtcbiAgcHVibGljIHNjYW4oXG4gICAgYXJnczogU2NhbkNvbW1hbmRJbnB1dCxcbiAgICBvcHRpb25zT3JDYj86IF9fSHR0cEhhbmRsZXJPcHRpb25zIHwgKChlcnI6IGFueSwgZGF0YT86IFNjYW5Db21tYW5kT3V0cHV0KSA9PiB2b2lkKSxcbiAgICBjYj86IChlcnI6IGFueSwgZGF0YT86IFNjYW5Db21tYW5kT3V0cHV0KSA9PiB2b2lkXG4gICk6IFByb21pc2U8U2NhbkNvbW1hbmRPdXRwdXQ+IHwgdm9pZCB7XG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBTY2FuQ29tbWFuZChhcmdzKTtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHRoaXMuc2VuZChjb21tYW5kLCBvcHRpb25zT3JDYik7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYiAhPT0gXCJvYmplY3RcIikgdGhyb3cgbmV3IEVycm9yKGBFeHBlY3QgaHR0cCBvcHRpb25zIGJ1dCBnZXQgJHt0eXBlb2Ygb3B0aW9uc09yQ2J9YCk7XG4gICAgICB0aGlzLnNlbmQoY29tbWFuZCwgb3B0aW9uc09yQ2IgfHwge30sIGNiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuc2VuZChjb21tYW5kLCBvcHRpb25zT3JDYik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFjY2VwdHMgbmF0aXZlIEphdmFTY3JpcHQgdHlwZXMgaW5zdGVhZCBvZiBgQXR0cmlidXRlVmFsdWVgcywgYW5kIGNhbGxzXG4gICAqIFRyYW5zYWN0R2V0SXRlbXNDb21tYW5kIG9wZXJhdGlvbiBmcm9tIHtAbGluayBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9AYXdzLXNkay9jbGllbnQtZHluYW1vZGIgQGF3cy1zZGsvY2xpZW50LWR5bmFtb2RifS5cbiAgICpcbiAgICogSmF2YVNjcmlwdCBvYmplY3RzIHBhc3NlZCBpbiBhcyBwYXJhbWV0ZXJzIGFyZSBtYXJzaGFsbGVkIGludG8gYEF0dHJpYnV0ZVZhbHVlYCBzaGFwZXNcbiAgICogcmVxdWlyZWQgYnkgQW1hem9uIER5bmFtb0RCLiBSZXNwb25zZXMgZnJvbSBEeW5hbW9EQiBhcmUgdW5tYXJzaGFsbGVkIGludG8gcGxhaW4gSmF2YVNjcmlwdCBvYmplY3RzLlxuICAgKi9cbiAgcHVibGljIHRyYW5zYWN0R2V0KGFyZ3M6IFRyYW5zYWN0R2V0Q29tbWFuZElucHV0LCBvcHRpb25zPzogX19IdHRwSGFuZGxlck9wdGlvbnMpOiBQcm9taXNlPFRyYW5zYWN0R2V0Q29tbWFuZE91dHB1dD47XG4gIHB1YmxpYyB0cmFuc2FjdEdldChhcmdzOiBUcmFuc2FjdEdldENvbW1hbmRJbnB1dCwgY2I6IChlcnI6IGFueSwgZGF0YT86IFRyYW5zYWN0R2V0Q29tbWFuZE91dHB1dCkgPT4gdm9pZCk6IHZvaWQ7XG4gIHB1YmxpYyB0cmFuc2FjdEdldChcbiAgICBhcmdzOiBUcmFuc2FjdEdldENvbW1hbmRJbnB1dCxcbiAgICBvcHRpb25zOiBfX0h0dHBIYW5kbGVyT3B0aW9ucyxcbiAgICBjYjogKGVycjogYW55LCBkYXRhPzogVHJhbnNhY3RHZXRDb21tYW5kT3V0cHV0KSA9PiB2b2lkXG4gICk6IHZvaWQ7XG4gIHB1YmxpYyB0cmFuc2FjdEdldChcbiAgICBhcmdzOiBUcmFuc2FjdEdldENvbW1hbmRJbnB1dCxcbiAgICBvcHRpb25zT3JDYj86IF9fSHR0cEhhbmRsZXJPcHRpb25zIHwgKChlcnI6IGFueSwgZGF0YT86IFRyYW5zYWN0R2V0Q29tbWFuZE91dHB1dCkgPT4gdm9pZCksXG4gICAgY2I/OiAoZXJyOiBhbnksIGRhdGE/OiBUcmFuc2FjdEdldENvbW1hbmRPdXRwdXQpID0+IHZvaWRcbiAgKTogUHJvbWlzZTxUcmFuc2FjdEdldENvbW1hbmRPdXRwdXQ+IHwgdm9pZCB7XG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBUcmFuc2FjdEdldENvbW1hbmQoYXJncyk7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aGlzLnNlbmQoY29tbWFuZCwgb3B0aW9uc09yQ2IpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2IgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihgRXhwZWN0IGh0dHAgb3B0aW9ucyBidXQgZ2V0ICR7dHlwZW9mIG9wdGlvbnNPckNifWApO1xuICAgICAgdGhpcy5zZW5kKGNvbW1hbmQsIG9wdGlvbnNPckNiIHx8IHt9LCBjYik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnNlbmQoY29tbWFuZCwgb3B0aW9uc09yQ2IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBY2NlcHRzIG5hdGl2ZSBKYXZhU2NyaXB0IHR5cGVzIGluc3RlYWQgb2YgYEF0dHJpYnV0ZVZhbHVlYHMsIGFuZCBjYWxsc1xuICAgKiBUcmFuc2FjdFdyaXRlSXRlbXNDb21tYW5kIG9wZXJhdGlvbiBmcm9tIHtAbGluayBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9AYXdzLXNkay9jbGllbnQtZHluYW1vZGIgQGF3cy1zZGsvY2xpZW50LWR5bmFtb2RifS5cbiAgICpcbiAgICogSmF2YVNjcmlwdCBvYmplY3RzIHBhc3NlZCBpbiBhcyBwYXJhbWV0ZXJzIGFyZSBtYXJzaGFsbGVkIGludG8gYEF0dHJpYnV0ZVZhbHVlYCBzaGFwZXNcbiAgICogcmVxdWlyZWQgYnkgQW1hem9uIER5bmFtb0RCLiBSZXNwb25zZXMgZnJvbSBEeW5hbW9EQiBhcmUgdW5tYXJzaGFsbGVkIGludG8gcGxhaW4gSmF2YVNjcmlwdCBvYmplY3RzLlxuICAgKi9cbiAgcHVibGljIHRyYW5zYWN0V3JpdGUoXG4gICAgYXJnczogVHJhbnNhY3RXcml0ZUNvbW1hbmRJbnB1dCxcbiAgICBvcHRpb25zPzogX19IdHRwSGFuZGxlck9wdGlvbnNcbiAgKTogUHJvbWlzZTxUcmFuc2FjdFdyaXRlQ29tbWFuZE91dHB1dD47XG4gIHB1YmxpYyB0cmFuc2FjdFdyaXRlKFxuICAgIGFyZ3M6IFRyYW5zYWN0V3JpdGVDb21tYW5kSW5wdXQsXG4gICAgY2I6IChlcnI6IGFueSwgZGF0YT86IFRyYW5zYWN0V3JpdGVDb21tYW5kT3V0cHV0KSA9PiB2b2lkXG4gICk6IHZvaWQ7XG4gIHB1YmxpYyB0cmFuc2FjdFdyaXRlKFxuICAgIGFyZ3M6IFRyYW5zYWN0V3JpdGVDb21tYW5kSW5wdXQsXG4gICAgb3B0aW9uczogX19IdHRwSGFuZGxlck9wdGlvbnMsXG4gICAgY2I6IChlcnI6IGFueSwgZGF0YT86IFRyYW5zYWN0V3JpdGVDb21tYW5kT3V0cHV0KSA9PiB2b2lkXG4gICk6IHZvaWQ7XG4gIHB1YmxpYyB0cmFuc2FjdFdyaXRlKFxuICAgIGFyZ3M6IFRyYW5zYWN0V3JpdGVDb21tYW5kSW5wdXQsXG4gICAgb3B0aW9uc09yQ2I/OiBfX0h0dHBIYW5kbGVyT3B0aW9ucyB8ICgoZXJyOiBhbnksIGRhdGE/OiBUcmFuc2FjdFdyaXRlQ29tbWFuZE91dHB1dCkgPT4gdm9pZCksXG4gICAgY2I/OiAoZXJyOiBhbnksIGRhdGE/OiBUcmFuc2FjdFdyaXRlQ29tbWFuZE91dHB1dCkgPT4gdm9pZFxuICApOiBQcm9taXNlPFRyYW5zYWN0V3JpdGVDb21tYW5kT3V0cHV0PiB8IHZvaWQge1xuICAgIGNvbnN0IGNvbW1hbmQgPSBuZXcgVHJhbnNhY3RXcml0ZUNvbW1hbmQoYXJncyk7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zT3JDYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICB0aGlzLnNlbmQoY29tbWFuZCwgb3B0aW9uc09yQ2IpO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGNiID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2IgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihgRXhwZWN0IGh0dHAgb3B0aW9ucyBidXQgZ2V0ICR7dHlwZW9mIG9wdGlvbnNPckNifWApO1xuICAgICAgdGhpcy5zZW5kKGNvbW1hbmQsIG9wdGlvbnNPckNiIHx8IHt9LCBjYik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnNlbmQoY29tbWFuZCwgb3B0aW9uc09yQ2IpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBY2NlcHRzIG5hdGl2ZSBKYXZhU2NyaXB0IHR5cGVzIGluc3RlYWQgb2YgYEF0dHJpYnV0ZVZhbHVlYHMsIGFuZCBjYWxsc1xuICAgKiBVcGRhdGVJdGVtQ29tbWFuZCBvcGVyYXRpb24gZnJvbSB7QGxpbmsgaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvQGF3cy1zZGsvY2xpZW50LWR5bmFtb2RiIEBhd3Mtc2RrL2NsaWVudC1keW5hbW9kYn0uXG4gICAqXG4gICAqIEphdmFTY3JpcHQgb2JqZWN0cyBwYXNzZWQgaW4gYXMgcGFyYW1ldGVycyBhcmUgbWFyc2hhbGxlZCBpbnRvIGBBdHRyaWJ1dGVWYWx1ZWAgc2hhcGVzXG4gICAqIHJlcXVpcmVkIGJ5IEFtYXpvbiBEeW5hbW9EQi4gUmVzcG9uc2VzIGZyb20gRHluYW1vREIgYXJlIHVubWFyc2hhbGxlZCBpbnRvIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cy5cbiAgICovXG4gIHB1YmxpYyB1cGRhdGUoYXJnczogVXBkYXRlQ29tbWFuZElucHV0LCBvcHRpb25zPzogX19IdHRwSGFuZGxlck9wdGlvbnMpOiBQcm9taXNlPFVwZGF0ZUNvbW1hbmRPdXRwdXQ+O1xuICBwdWJsaWMgdXBkYXRlKGFyZ3M6IFVwZGF0ZUNvbW1hbmRJbnB1dCwgY2I6IChlcnI6IGFueSwgZGF0YT86IFVwZGF0ZUNvbW1hbmRPdXRwdXQpID0+IHZvaWQpOiB2b2lkO1xuICBwdWJsaWMgdXBkYXRlKFxuICAgIGFyZ3M6IFVwZGF0ZUNvbW1hbmRJbnB1dCxcbiAgICBvcHRpb25zOiBfX0h0dHBIYW5kbGVyT3B0aW9ucyxcbiAgICBjYjogKGVycjogYW55LCBkYXRhPzogVXBkYXRlQ29tbWFuZE91dHB1dCkgPT4gdm9pZFxuICApOiB2b2lkO1xuICBwdWJsaWMgdXBkYXRlKFxuICAgIGFyZ3M6IFVwZGF0ZUNvbW1hbmRJbnB1dCxcbiAgICBvcHRpb25zT3JDYj86IF9fSHR0cEhhbmRsZXJPcHRpb25zIHwgKChlcnI6IGFueSwgZGF0YT86IFVwZGF0ZUNvbW1hbmRPdXRwdXQpID0+IHZvaWQpLFxuICAgIGNiPzogKGVycjogYW55LCBkYXRhPzogVXBkYXRlQ29tbWFuZE91dHB1dCkgPT4gdm9pZFxuICApOiBQcm9taXNlPFVwZGF0ZUNvbW1hbmRPdXRwdXQ+IHwgdm9pZCB7XG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBVcGRhdGVDb21tYW5kKGFyZ3MpO1xuICAgIGlmICh0eXBlb2Ygb3B0aW9uc09yQ2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgdGhpcy5zZW5kKGNvbW1hbmQsIG9wdGlvbnNPckNiKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBjYiA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBpZiAodHlwZW9mIG9wdGlvbnNPckNiICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgRXJyb3IoYEV4cGVjdCBodHRwIG9wdGlvbnMgYnV0IGdldCAke3R5cGVvZiBvcHRpb25zT3JDYn1gKTtcbiAgICAgIHRoaXMuc2VuZChjb21tYW5kLCBvcHRpb25zT3JDYiB8fCB7fSwgY2IpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5zZW5kKGNvbW1hbmQsIG9wdGlvbnNPckNiKTtcbiAgICB9XG4gIH1cbn1cbiJdfQ==